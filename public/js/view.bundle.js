(()=>{var t={69:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var s=Object.getOwnPropertyDescriptor(e,n);s&&!("get"in s?!e.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,s)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),s=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0});const a=n(908),i=n(525);a.default.init=function(t={}){if("object"!=typeof location||!location.protocol||!location.hostname)return new a.default({...t,host:"arweave.net",port:443,protocol:"https"});const e=location.protocol.replace(":",""),n=location.hostname,r=location.port?parseInt(location.port):"https"==e?443:80,s=(0,i.getDefaultConfig)(e,n),o=t.protocol||s.protocol,c=t.host||s.host,l=t.port||s.port||r;return new a.default({...t,host:c,protocol:o,port:l})},"object"==typeof globalThis?globalThis.Arweave=a.default:"object"==typeof self&&(self.Arweave=a.default),s(n(908),e),e.default=a.default},115:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(848);n(204),e.default=class{api;crypto;constructor(t,e){this.api=t,this.crypto=e}getBalance(t){return this.api.get(`wallet/${t}/balance`).then((t=>t.data))}getLastTransactionID(t){return this.api.get(`wallet/${t}/last_tx`).then((t=>t.data))}generate(){return this.crypto.generateJWK()}async jwkToAddress(t){return t&&"use_wallet"!==t?this.getAddress(t):this.getAddress()}async getAddress(t){if(t&&"use_wallet"!==t)return this.ownerToAddress(t.n);try{await arweaveWallet.connect(["ACCESS_ADDRESS"])}catch{}return arweaveWallet.getActiveAddress()}async ownerToAddress(t){return r.bufferTob64Url(await this.crypto.hash(r.b64UrlToBuffer(t)))}}},143:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(911);n(204);class s{api;network;static HASH_ENDPOINT="block/hash/";static HEIGHT_ENDPOINT="block/height/";constructor(t,e){this.api=t,this.network=e}async get(t){const e=await this.api.get(`${s.HASH_ENDPOINT}${t}`);if(200===e.status)return e.data;throw 404===e.status?new r.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${e}`)}async getByHeight(t){const e=await this.api.get(`${s.HEIGHT_ENDPOINT}${t}`);if(200===e.status)return e.data;throw 404===e.status?new r.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${e}`)}async getCurrent(){const{current:t}=await this.network.getInfo();return await this.get(t)}}e.default=s},204:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});const r={}},311:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(848);e.default=class{keyLength=4096;publicExponent=65537;hashAlgorithm="sha256";driver;constructor(){if(!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let t=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),e=await this.driver.exportKey("jwk",t.privateKey);return{kty:e.kty,e:e.e,n:e.n,d:e.d,p:e.p,q:e.q,dp:e.dp,dq:e.dq,qi:e.qi}}async sign(t,e,{saltLength:n}={}){let r=await this.driver.sign({name:"RSA-PSS",saltLength:n??32},await this.jwkToCryptoKey(t),e);return new Uint8Array(r)}async hash(t,e="SHA-256"){let n=await this.driver.digest(e,t);return new Uint8Array(n)}async verify(t,e,n){const r={kty:"RSA",e:"AQAB",n:t},s=await this.jwkToPublicCryptoKey(r),a=await this.driver.digest("SHA-256",e),i=await this.driver.verify({name:"RSA-PSS",saltLength:0},s,n,e),o=await this.driver.verify({name:"RSA-PSS",saltLength:32},s,n,e),c=Math.ceil((s.algorithm.modulusLength-1)/8)-a.byteLength-2,l=await this.driver.verify({name:"RSA-PSS",saltLength:c},s,n,e),u=i||o||l;if(!u){const t={algorithm:s.algorithm.name,modulusLength:s.algorithm.modulusLength,keyUsages:s.usages,saltLengthsAttempted:`0, 32, ${c}`};console.warn("Transaction Verification Failed! \n",`Details: ${JSON.stringify(t,null,2)} \n`,"N.B. ArweaveJS is only guaranteed to verify txs created using ArweaveJS.")}return u}async jwkToCryptoKey(t){return this.driver.importKey("jwk",t,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(t){return this.driver.importKey("jwk",t,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if("undefined"==typeof crypto)return!1;const t=crypto?.subtle;return void 0!==t&&["generateKey","importKey","exportKey","digest","sign"].every((e=>"function"==typeof t[e]))}async encrypt(t,e,n){const s=await this.driver.importKey("raw","string"==typeof e?r.stringToBuffer(e):e,{name:"PBKDF2",length:32},!1,["deriveKey"]),a=await this.driver.deriveKey({name:"PBKDF2",salt:n?r.stringToBuffer(n):r.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},s,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),i=new Uint8Array(16);crypto.getRandomValues(i);const o=await this.driver.encrypt({name:"AES-CBC",iv:i},a,t);return r.concatBuffers([i,o])}async decrypt(t,e,n){const s=await this.driver.importKey("raw","string"==typeof e?r.stringToBuffer(e):e,{name:"PBKDF2",length:32},!1,["deriveKey"]),a=await this.driver.deriveKey({name:"PBKDF2",salt:n?r.stringToBuffer(n):r.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},s,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),i=t.slice(0,16),o=await this.driver.decrypt({name:"AES-CBC",iv:i},a,t.slice(16));return r.concatBuffers([o])}}},320:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(911),s=n(813),a=n(848),i=n(472);n(204),e.default=class{api;crypto;chunks;constructor(t,e,n){this.api=t,this.crypto=e,this.chunks=n}async getTransactionAnchor(){const t=await this.api.get("tx_anchor");if(!t.data.match(/^[a-z0-9_-]{43,}/i)||!t.ok)throw new Error(`Could not getTransactionAnchor. Received: ${t.data}. Status: ${t.status}, ${t.statusText}`);return t.data}async getPrice(t,e){let n=e?`price/${t}/${e}`:`price/${t}`;const r=await this.api.get(n);if(!/^\d+$/.test(r.data)||!r.ok)throw new Error(`Could not getPrice. Received: ${r.data}. Status: ${r.status}, ${r.statusText}`);return r.data}async get(t){const e=await this.api.get(`tx/${t}`);if(200==e.status){const n=parseInt(e.data.data_size);if(e.data.format>=2&&n>0&&n<=12582912){const n=await this.getData(t);return new s.default({...e.data,data:n})}return new s.default({...e.data,format:e.data.format||1})}if(404==e.status)throw new r.default("TX_NOT_FOUND");if(410==e.status)throw new r.default("TX_FAILED");throw new r.default("TX_INVALID")}fromRaw(t){return new s.default(t)}async search(t,e){return this.api.post("arql",{op:"equals",expr1:t,expr2:e}).then((t=>t.data?t.data:[]))}getStatus(t){return this.api.get(`tx/${t}/status`).then((t=>200==t.status?{status:200,confirmed:t.data}:{status:t.status,confirmed:null}))}async getData(t,e){let n;try{n=await this.chunks.downloadChunkedData(t)}catch(e){console.error(`Error while trying to download chunked data for ${t}`),console.error(e)}if(!n){console.warn(`Falling back to gateway cache for ${t}`);try{const{data:e,ok:r,status:s,statusText:a}=await this.api.get(`/${t}`,{responseType:"arraybuffer"});if(!r)throw new Error("Bad http status code",{cause:{status:s,statusText:a}});n=e}catch(e){console.error(`Error while trying to download contiguous data from gateway cache for ${t}`),console.error(e)}}if(!n)throw new Error(`${t} data was not found!`);return e&&e.decode&&!e.string?n:e&&e.decode&&e.string?a.bufferToString(n):a.bufferTob64Url(n)}async sign(t,e,n){const r="object"==typeof e&&(t=>{let e=!0;return["n","e","d","p","q","dp","dq","qi"].map((n=>!(n in t)&&(e=!1))),e})(e),s="object"==typeof arweaveWallet;if(!r&&!s)throw new Error("No valid JWK or external wallet found to sign transaction.");if(r){t.setOwner(e.n);let r=await t.getSignatureData(),s=await this.crypto.sign(e,r,n),i=await this.crypto.hash(s);t.setSignature({id:a.bufferTob64Url(i),owner:e.n,signature:a.bufferTob64Url(s)})}else{if(!s)throw new Error("An error occurred while signing. Check wallet is valid");{try{(await arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await arweaveWallet.connect(["SIGN_TRANSACTION"])}catch{}const e=await arweaveWallet.sign(t,n);t.setSignature({id:e.id,owner:e.owner,reward:e.reward,tags:e.tags,signature:e.signature})}}}async verify(t){const e=await t.getSignatureData(),n=t.get("signature",{decode:!0,string:!1}),r=a.bufferTob64Url(await this.crypto.hash(n));if(t.id!==r)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(t.owner,e,n)}async post(t){if("string"==typeof t?t=new s.default(JSON.parse(t)):"function"==typeof t.readInt32BE?t=new s.default(JSON.parse(t.toString())):"object"!=typeof t||t instanceof s.default||(t=new s.default(t)),!(t instanceof s.default))throw new Error("Must be Transaction object");t.chunks||await t.prepareChunks(t.data);const e=await this.getUploader(t,t.data);try{for(;!e.isComplete;)await e.uploadChunk()}catch(t){if(e.lastResponseStatus>0)return{status:e.lastResponseStatus,statusText:e.lastResponseError,data:{error:e.lastResponseError}};throw t}return{status:200,statusText:"OK",data:{}}}async getUploader(t,e){let n;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t instanceof s.default){if(e||(e=t.data),!(e instanceof Uint8Array))throw new Error("Data format is invalid");t.chunks||await t.prepareChunks(e),n=new i.TransactionUploader(this.api,t),n.data&&0!==n.data.length||(n.data=e)}else{if("string"==typeof t&&(t=await i.TransactionUploader.fromTransactionId(this.api,t)),!(e&&e instanceof Uint8Array))throw new Error("Must provide data when resuming upload");n=await i.TransactionUploader.fromSerialized(this.api,t,e)}return n}async*upload(t,e){const n=await this.getUploader(t,e);for(;!n.isComplete;)await n.uploadChunk(),yield n;return n}}},363:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(s,a){function i(t){try{c(r.next(t))}catch(t){a(t)}}function o(t){try{c(r.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(i,o)}c((r=r.apply(t,e||[])).next())}))},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=s(n(546)),i=s(n(727)),o=n(764);e.default=class{constructor(t,e=o.LOGS.ARWEAVE){this.reqType="transactions",this.options={},this.after="",this.afterRegex=/after: *"([^"]*)"/gi,this.emptyLinesRegex=/^\s*[\r\n]/gm,this.fields=["id","anchor","signature","recipient","owner","owner.address","owner.key","fee","fee.winston","fee.ar","quantity","quantity.winston","quantity.ar","data","data.size","data.type","tags","tags.name","tags.value","block","block.id","block.timestamp","block.height","block.previous","parent","parent.id"],this.includes=new Set,this.arweave=t,o.log.init(e,t),this.includes=new Set(this.fields)}getCursor(){return this.after}search(t="transactions"){return this.reqType=t,this.options={},this.after="",this}id(t){return this.checkSearchType(),this.options.id=t,this.options.ids=[t],this}ids(t){return this.checkSearchType(),this.options.ids=t,this.options.id=t[0],this}appName(t){return this.checkSearchType(),this.tag("App-Name",[t]),this}type(t){return this.checkSearchType(),this.tag("Content-Type",[t]),this}tags(t){this.checkSearchType();const e=[];for(const n of t){const t="string"==typeof n.values?[n.values]:n.values;e.push({name:n.name,values:t})}const n=this.options.tags&&this.options.tags.length?this.options.tags:[];return this.options.tags=[...e,...n],this}tag(t,e){return this.checkSearchType(),this.options.tags||(this.options.tags=[]),"string"==typeof e&&(e=[e]),this.options.tags.push({name:t,values:e}),this}from(t){return this.checkSearchType(),"string"==typeof t&&(t=[t]),this.options.owners=t,this}to(t){return this.checkSearchType(),"string"==typeof t&&(t=[t]),this.options.recipients=t,this}min(t){return this.checkSearchType(),this.options.block||(this.options.block={}),this.options.block.min=t,this}max(t){return this.checkSearchType(),this.options.block||(this.options.block={}),this.options.block.max=t,this}limit(t){return this.checkSearchType(),t<1?(console.warn("Limit cannot be less than 1, setting it to 1."),t=1):t>100&&console.warn("Arweave GQL won't return more than 100 entries at once."),this.options.first=t,this}sort(t){return this.options.sort=t,this}cursor(t){return this.checkSearchType(),this.options.after=t,this}only(t){if(this.includes=new Set,"string"==typeof t&&-1!==this.fields.indexOf(t))return this.includes.add(t),this.validateIncludes(),this;const e=[];for(const n of t)-1!==this.fields.indexOf(n)&&e.push(n);return e.length&&(this.includes=new Set(e)),this.validateIncludes(),this}exclude(t){if(this.includes=new Set(this.fields),"string"==typeof t)return this.includes.delete(t),this.validateIncludes(),this;for(const e of t)this.includes.delete(e);return this.validateIncludes(),this}find(t={}){return r(this,void 0,void 0,(function*(){this.checkSearchType();for(const e of Object.keys(t))this.options[e]=t[e];this.options.first||(this.options.first=10);const e=this.construct();return this.run(e)}))}findOne(t={}){return r(this,void 0,void 0,(function*(){this.checkSearchType();for(const e of Object.keys(t))this.options[e]=t[e];this.options.first=1;const e=this.construct(),n=yield this.run(e);return n.length?n[0]:null}))}findAll(t={}){return r(this,void 0,void 0,(function*(){this.checkSearchType();for(const e of Object.keys(t))this.options[e]=t[e];this.options.first=100;const e=this.construct();return this.runAll(e)}))}next(){return r(this,void 0,void 0,(function*(){if(!this.after||!this.after.length)return void o.log.show("next(): Nothing more to search.");const t=this.construct().replace(this.afterRegex,`after: "${this.after}"`),e=yield this.run(t);return 1===this.options.first?e.length?e[0]:null:e}))}run(t){return r(this,void 0,void 0,(function*(){o.log.show("Running query:"),o.log.show(t);const e=yield this.get(t);if(!e)return[];if(e.transaction)return[new i.default(e.transaction,this.arweave)];if(e.block)return[new a.default(e.block)];if(e.transactions){const t=e.transactions.edges;return t&&t.length?this.after=t[t.length-1].cursor:this.after="",t.map((t=>new i.default(t.node,this.arweave)))}if(e.blocks){const t=e.blocks.edges;return t&&t.length?this.after=t[t.length-1].cursor:this.after="",t.map((t=>new a.default(t.node)))}}))}runAll(t){return r(this,void 0,void 0,(function*(){let e=!0,n=[],r=this.options.after||"",s=!0;for(;e;){o.log.show("Running query:"),o.log.show(t);const c=yield this.get(t);if(!c)return[];if(c.transaction)return[new i.default(c.transaction,this.arweave)];if(c.block)return[new a.default(c.block)];if(c.transactions){const s=c.transactions;s.edges&&s.edges.length&&(n=n.concat(s.edges),r=s.edges[s.edges.length-1].cursor,t=t.replace(this.afterRegex,`after: "${r}"`)),e=s.pageInfo.hasNextPage}else if(c.blocks){s=!1;const a=c.blocks;a.edges&&a.edges.length&&(n=n.concat(a.edges),r=a.edges[a.edges.length-1].cursor,t=t.replace(this.afterRegex,`after: "${r}"`)),e=a.pageInfo.hasNextPage}}return s?n.map((t=>new i.default(t.node,this.arweave))):n.map((t=>new a.default(t.node)))}))}checkSearchType(){if(!this.reqType||"transaction"!==this.reqType&&"block"!==this.reqType&&"transactions"!==this.reqType&&"blocks"!==this.reqType)throw new Error('Invalid search type. Must provide one and it must be either "transaction", "transactions", "block" or "blocks"')}get(t){return r(this,void 0,void 0,(function*(){const e=yield this.arweave.api.post("graphql",{query:t},{headers:{"content-type":"application/json"}});return o.log.show("Returned result: "),o.log.show(e.data.data),e.data.data}))}construct(){"transactions"===this.reqType||"blocks"===this.reqType?(delete this.options.id,"transactions"===this.reqType?delete this.options.height:(delete this.options.owners,delete this.options.recipients,delete this.options.tags,delete this.options.block),this.options.after||(this.options.after="")):this.options={id:this.options.id};let t=JSON.stringify(this.options,null,2).replace(/"([^"]+)":/gm,"$1: ").replace('"HEIGHT_DESC"',"HEIGHT_DESC").replace('"HEIGHT_ASC"',"HEIGHT_ASC");t=t.substring(1,t.length-1);let e="";if("transaction"===this.reqType||"transactions"===this.reqType){let t="";this.includes.has("owner")&&(t=`owner {\n          ${this.includes.has("owner.address")?"address":""}\n          ${this.includes.has("owner.key")?"key":""}\n        }`);let n="";this.includes.has("fee")&&(n=`fee {\n          ${this.includes.has("fee.winston")?"winston":""}\n          ${this.includes.has("fee.ar")?"ar":""}\n        }`);let r="";this.includes.has("quantity")&&(r=`quantity {\n          ${this.includes.has("quantity.winston")?"winston":""}\n          ${this.includes.has("quantity.ar")?"ar":""}\n        }`);let s="";this.includes.has("data")&&(s=`data {\n          ${this.includes.has("data.size")?"size":""}\n          ${this.includes.has("data.type")?"type":""}\n        }`);let a="";this.includes.has("tags")&&(a=`tags {\n          ${this.includes.has("tags.name")?"name":""}\n          ${this.includes.has("tags.value")?"value":""}\n        }`);let i="";this.includes.has("block")&&(i=`block {\n          ${this.includes.has("block.id")?"id":""}\n          ${this.includes.has("block.timestamp")?"timestamp":""}\n          ${this.includes.has("block.height")?"height":""}\n          ${this.includes.has("block.previous")?"previous":""}\n        }`);let o="";(this.includes.has("parent")||this.includes.has("parent.id"))&&(o="parent {\n          id\n        }"),e=`\n      ${this.includes.has("id")?"id":""}\n      ${this.includes.has("anchor")?"anchor":""}\n      ${this.includes.has("signature")?"signature":""}\n      ${this.includes.has("recipient")?"recipient":""}\n      ${t}\n      ${n}\n      ${r}\n      ${s}\n      ${a}\n      ${i}\n      ${o}\n      `,e=e.replace(this.emptyLinesRegex,"").trim(),e.length||(e="\n        id\n        anchor\n        signature\n        recipient\n        owner {\n          address\n          key\n        }\n        fee {\n          winston\n          ar\n        }\n        quantity {\n          winston\n          ar\n        }\n        data {\n          size\n          type\n        }\n        tags {\n          name\n          value\n        }\n        block {\n          id\n          timestamp\n          height\n          previous\n        }\n        parent {\n          id\n        }")}else e=`\n      ${this.includes.has("block.id")?"id":""}\n      ${this.includes.has("block.timestamp")?"timestamp":""}\n      ${this.includes.has("block.height")?"height":""}\n      ${this.includes.has("block.previous")?"previous":""}\n      `,e=e.replace(this.emptyLinesRegex,"").trim(),e.length||(e="\n        id\n        timestamp\n        height\n        previous");if("transactions"!==this.reqType&&"blocks"!==this.reqType||(e=`\n      pageInfo {\n        hasNextPage\n      }\n      edges { \n        cursor\n        node { \n          ${e}\n        } \n      }`),!this.reqType||!t)throw new Error("Invalid options. You need to first set your options!");return`query {\n      ${this.reqType}(\n        ${t}\n      ){\n        ${e}\n      }\n    }`.replace(/(\r\n|\n|\r)/gm,"")}validateIncludes(){!this.includes.has("owner")||this.includes.has("owner.address")||this.includes.has("owner.key")||(this.includes.add("owner.address"),this.includes.add("owner.key")),!this.includes.has("fee")||this.includes.has("fee.winston")||this.includes.has("fee.ar")||(this.includes.add("fee.winston"),this.includes.add("fee.ar")),!this.includes.has("quantity")||this.includes.has("quantity.winston")||this.includes.has("quantity.ar")||(this.includes.add("quantity.winston"),this.includes.add("quantity.ar")),!this.includes.has("data")||this.includes.has("data.size")||this.includes.has("data.type")||(this.includes.add("data.size"),this.includes.add("data.type")),!this.includes.has("tags")||this.includes.has("tags.name")||this.includes.has("tags.value")||(this.includes.add("tags.name"),this.includes.add("tags.value")),!this.includes.has("block")||this.includes.has("block.timestamp")||this.includes.has("block.height")||this.includes.has("block.previous")||(this.includes.add("block.id"),this.includes.add("block.timestamp"),this.includes.add("block.height"),this.includes.add("block.previous")),this.includes.has("owner")||!this.includes.has("owner.address")&&!this.includes.has("owner.key")||this.includes.add("owner"),this.includes.has("fee")||!this.includes.has("fee.winston")&&!this.includes.has("fee.ar")||this.includes.add("fee"),this.includes.has("quantity")||!this.includes.has("quantity.winston")&&!this.includes.has("quantity.ar")||this.includes.add("quantity"),this.includes.has("data")||!this.includes.has("data.size")&&!this.includes.has("data.type")||this.includes.add("data"),this.includes.has("tags")||!this.includes.has("tags.name")&&!this.includes.has("tags.value")||this.includes.add("tags"),!this.includes.has("block")&&(this.includes.has("block.timestamp")||this.includes.has("block.height")||this.includes.has("block.previous"))&&this.includes.add("block")}}},472:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransactionUploader=void 0;const r=n(813),s=n(848),a=n(911),i=n(647),o=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"];class c{api;chunkIndex=0;txPosted=!1;transaction;lastRequestTimeEnd=0;totalErrors=0;data;lastResponseStatus=0;lastResponseError="";get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}constructor(t,e){if(this.api=t,!e.id)throw new Error("Transaction is not signed");if(!e.chunks)throw new Error("Transaction chunks not prepared");this.data=e.data,this.transaction=new r.default(Object.assign({},e,{data:new Uint8Array(0)}))}async uploadChunk(t){if(this.isComplete)throw new Error("Upload is already complete");if(""!==this.lastResponseError?this.totalErrors++:this.totalErrors=0,100===this.totalErrors)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let e=""===this.lastResponseError?0:Math.max(this.lastRequestTimeEnd+4e4-Date.now(),4e4);if(e>0&&(e-=e*Math.random()*.3,await new Promise((t=>setTimeout(t,e)))),this.lastResponseError="",!this.txPosted)return void await this.postTransaction();t&&(this.chunkIndex=t);const n=this.transaction.getChunk(t||this.chunkIndex,this.data);if(!await(0,i.validatePath)(this.transaction.chunks.data_root,parseInt(n.offset),0,parseInt(n.data_size),s.b64UrlToBuffer(n.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);const r=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch((t=>(console.error(t.message),{status:-1,data:{error:t.message}})));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=r.status,200==this.lastResponseStatus)this.chunkIndex++;else if(this.lastResponseError=(0,a.getError)(r),o.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(t,e,n){if(!e||"number"!=typeof e.chunkIndex||"object"!=typeof e.transaction)throw new Error("Serialized object does not match expected format.");var s=new r.default(e.transaction);s.chunks||await s.prepareChunks(n);const a=new c(t,s);if(a.chunkIndex=e.chunkIndex,a.lastRequestTimeEnd=e.lastRequestTimeEnd,a.lastResponseError=e.lastResponseError,a.lastResponseStatus=e.lastResponseStatus,a.txPosted=e.txPosted,a.data=n,a.transaction.data_root!==e.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return a}static async fromTransactionId(t,e){const n=await t.get(`tx/${e}`);if(200!==n.status)throw new Error(`Tx ${e} not found: ${n.status}`);const r=n.data;return r.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:r}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=1){this.transaction.data=this.data;const t=await this.api.post("tx",this.transaction).catch((t=>(console.error(t),{status:-1,data:{error:t.message}})));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=t.status,this.transaction.data=new Uint8Array(0),t.status>=200&&t.status<300)return this.txPosted=!0,void(this.chunkIndex=1);throw this.lastResponseError=(0,a.getError)(t),new Error(`Unable to upload transaction: ${t.status}, ${this.lastResponseError}`)}const t=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=t.status,!(t.status>=200&&t.status<300))throw this.lastResponseError=(0,a.getError)(t),new Error(`Unable to upload transaction: ${t.status}, ${this.lastResponseError}`);this.txPosted=!0}}e.TransactionUploader=c},475:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;const r=n(908);async function s(t){if(Array.isArray(t)){const e=r.default.utils.concatBuffers([r.default.utils.stringToBuffer("list"),r.default.utils.stringToBuffer(t.length.toString())]);return await a(t,await r.default.crypto.hash(e,"SHA-384"))}const e=r.default.utils.concatBuffers([r.default.utils.stringToBuffer("blob"),r.default.utils.stringToBuffer(t.byteLength.toString())]),n=r.default.utils.concatBuffers([await r.default.crypto.hash(e,"SHA-384"),await r.default.crypto.hash(t,"SHA-384")]);return await r.default.crypto.hash(n,"SHA-384")}async function a(t,e){if(t.length<1)return e;const n=r.default.utils.concatBuffers([e,await s(t[0])]),i=await r.default.crypto.hash(n,"SHA-384");return await a(t.slice(1),i)}},525:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultConfig=void 0,e.getDefaultConfig=(t,e)=>{if(((t,e)=>{const n=/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,r=e.split("."),s=r[r.length-1],a=["localhost","[::1]"];return a.includes(e)||"file"==t||a.includes(s)||!!e.match(n)||!!s.match(n)})(t,e))return{protocol:"https",host:"arweave.net",port:443};if(!(t=>{const e="["===t.charAt(0);return!!t.match(/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/)||e})(e)){let n=e.split(".");if(n.length>=3)return n.shift(),{protocol:t,host:n.join(".")}}return{protocol:t,host:e}}},526:(t,e)=>{"use strict";e.byteLength=function(t){var e=o(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,a=o(t),i=a[0],c=a[1],l=new s(function(t,e,n){return 3*(e+n)/4-n}(0,i,c)),u=0,h=c>0?i-4:i;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;return 2===c&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,l[u++]=255&e),1===c&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e),l},e.fromByteArray=function(t){for(var e,r=t.length,s=r%3,a=[],i=16383,o=0,l=r-s;o<l;o+=i)a.push(c(t,o,o+i>l?l:o+i));return 1===s?(e=t[r-1],a.push(n[e>>2]+n[e<<4&63]+"==")):2===s&&(e=(t[r-2]<<8)+t[r-1],a.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"=")),a.join("")};for(var n=[],r=[],s="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0;i<64;++i)n[i]=a[i],r[a.charCodeAt(i)]=i;function o(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,r){for(var s,a,i=[],o=e;o<r;o+=3)s=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(n[(a=s)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return i.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},546:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(764);e.default=class{constructor(t){this._id=t.id,this._timestamp=t.timestamp,this._height=t.height,this._previous=t.previous}get id(){return this._id||r.log.show("ID wasn't defined, make sure you have selected to return it."),this._id}get timestamp(){return this._timestamp||r.log.show("Timestamp wasn't defined, make sure you have selected to return it."),this._timestamp}get height(){return this._height||r.log.show("Height wasn't defined, make sure you have selected to return it."),this._height}get previous(){return this._previous||r.log.show("Previous wasn't defined, make sure you have selected to return it."),this._previous}}},566:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(594);e.default=class{BigNum;constructor(){this.BigNum=(t,e)=>new(r.BigNumber.clone({DECIMAL_PLACES:e}))(t)}winstonToAr(t,{formatted:e=!1,decimals:n=12,trim:r=!0}={}){let s=this.stringToBigNum(t,n).shiftedBy(-12);return e?s.toFormat(n):s.toFixed(n)}arToWinston(t,{formatted:e=!1}={}){let n=this.stringToBigNum(t).shiftedBy(12);return e?n.toFormat():n.toFixed(0)}compare(t,e){let n=this.stringToBigNum(t),r=this.stringToBigNum(e);return n.comparedTo(r)}isEqual(t,e){return 0===this.compare(t,e)}isLessThan(t,e){let n=this.stringToBigNum(t),r=this.stringToBigNum(e);return n.isLessThan(r)}isGreaterThan(t,e){let n=this.stringToBigNum(t),r=this.stringToBigNum(e);return n.isGreaterThan(r)}add(t,e){let n=this.stringToBigNum(t);return this.stringToBigNum(e),n.plus(e).toFixed(0)}sub(t,e){let n=this.stringToBigNum(t);return this.stringToBigNum(e),n.minus(e).toFixed(0)}stringToBigNum(t,e=12){return this.BigNum(t,e)}}},594:function(t,e,n){var r;!function(){"use strict";var s,a=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,i=Math.ceil,o=Math.floor,c="[BigNumber Error] ",l=c+"Number primitive has more than 15 significant digits: ",u=1e14,h=14,d=9007199254740991,f=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],g=1e7,p=1e9;function w(t){var e=0|t;return t>0||t===e?e:e-1}function y(t){for(var e,n,r=1,s=t.length,a=t[0]+"";r<s;){for(e=t[r++]+"",n=h-e.length;n--;e="0"+e);a+=e}for(s=a.length;48===a.charCodeAt(--s););return a.slice(0,s+1||1)}function m(t,e){var n,r,s=t.c,a=e.c,i=t.s,o=e.s,c=t.e,l=e.e;if(!i||!o)return null;if(n=s&&!s[0],r=a&&!a[0],n||r)return n?r?0:-o:i;if(i!=o)return i;if(n=i<0,r=c==l,!s||!a)return r?0:!s^n?1:-1;if(!r)return c>l^n?1:-1;for(o=(c=s.length)<(l=a.length)?c:l,i=0;i<o;i++)if(s[i]!=a[i])return s[i]>a[i]^n?1:-1;return c==l?0:c>l^n?1:-1}function v(t,e,n,r){if(t<e||t>n||t!==o(t))throw Error(c+(r||"Argument")+("number"==typeof t?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function b(t){var e=t.c.length-1;return w(t.e/h)==e&&t.c[e]%2!=0}function k(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function T(t,e,n){var r,s;if(e<0){for(s=n+".";++e;s+=n);t=s+t}else if(++e>(r=t.length)){for(s=n,e-=r;--e;s+=n);t+=s}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}s=function t(e){var n,r,s,_,A,E,x,S,N,O,B=F.prototype={constructor:F,toString:null,valueOf:null},R=new F(1),C=20,$=4,I=-7,U=21,P=-1e7,q=1e7,D=!1,L=1,M=0,j={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},H="0123456789abcdefghijklmnopqrstuvwxyz",K=!0;function F(t,e){var n,i,c,u,f,g,p,w,y=this;if(!(y instanceof F))return new F(t,e);if(null==e){if(t&&!0===t._isBigNumber)return y.s=t.s,void(!t.c||t.e>q?y.c=y.e=null:t.e<P?y.c=[y.e=0]:(y.e=t.e,y.c=t.c.slice()));if((g="number"==typeof t)&&0*t==0){if(y.s=1/t<0?(t=-t,-1):1,t===~~t){for(u=0,f=t;f>=10;f/=10,u++);return void(u>q?y.c=y.e=null:(y.e=u,y.c=[t]))}w=String(t)}else{if(!a.test(w=String(t)))return s(y,w,g);y.s=45==w.charCodeAt(0)?(w=w.slice(1),-1):1}(u=w.indexOf("."))>-1&&(w=w.replace(".","")),(f=w.search(/e/i))>0?(u<0&&(u=f),u+=+w.slice(f+1),w=w.substring(0,f)):u<0&&(u=w.length)}else{if(v(e,2,H.length,"Base"),10==e&&K)return V(y=new F(t),C+y.e+1,$);if(w=String(t),g="number"==typeof t){if(0*t!=0)return s(y,w,g,e);if(y.s=1/t<0?(w=w.slice(1),-1):1,F.DEBUG&&w.replace(/^0\.0*|\./,"").length>15)throw Error(l+t)}else y.s=45===w.charCodeAt(0)?(w=w.slice(1),-1):1;for(n=H.slice(0,e),u=f=0,p=w.length;f<p;f++)if(n.indexOf(i=w.charAt(f))<0){if("."==i){if(f>u){u=p;continue}}else if(!c&&(w==w.toUpperCase()&&(w=w.toLowerCase())||w==w.toLowerCase()&&(w=w.toUpperCase()))){c=!0,f=-1,u=0;continue}return s(y,String(t),g,e)}g=!1,(u=(w=r(w,e,10,y.s)).indexOf("."))>-1?w=w.replace(".",""):u=w.length}for(f=0;48===w.charCodeAt(f);f++);for(p=w.length;48===w.charCodeAt(--p););if(w=w.slice(f,++p)){if(p-=f,g&&F.DEBUG&&p>15&&(t>d||t!==o(t)))throw Error(l+y.s*t);if((u=u-f-1)>q)y.c=y.e=null;else if(u<P)y.c=[y.e=0];else{if(y.e=u,y.c=[],f=(u+1)%h,u<0&&(f+=h),f<p){for(f&&y.c.push(+w.slice(0,f)),p-=h;f<p;)y.c.push(+w.slice(f,f+=h));f=h-(w=w.slice(f)).length}else f-=p;for(;f--;w+="0");y.c.push(+w)}}else y.c=[y.e=0]}function z(t,e,n,r){var s,a,i,o,c;if(null==n?n=$:v(n,0,8),!t.c)return t.toString();if(s=t.c[0],i=t.e,null==e)c=y(t.c),c=1==r||2==r&&(i<=I||i>=U)?k(c,i):T(c,i,"0");else if(a=(t=V(new F(t),e,n)).e,o=(c=y(t.c)).length,1==r||2==r&&(e<=a||a<=I)){for(;o<e;c+="0",o++);c=k(c,a)}else if(e-=i,c=T(c,a,"0"),a+1>o){if(--e>0)for(c+=".";e--;c+="0");}else if((e+=a-o)>0)for(a+1==o&&(c+=".");e--;c+="0");return t.s<0&&s?"-"+c:c}function G(t,e){for(var n,r,s=1,a=new F(t[0]);s<t.length;s++)(!(r=new F(t[s])).s||(n=m(a,r))===e||0===n&&a.s===e)&&(a=r);return a}function W(t,e,n){for(var r=1,s=e.length;!e[--s];e.pop());for(s=e[0];s>=10;s/=10,r++);return(n=r+n*h-1)>q?t.c=t.e=null:n<P?t.c=[t.e=0]:(t.e=n,t.c=e),t}function V(t,e,n,r){var s,a,c,l,d,g,p,w=t.c,y=f;if(w){t:{for(s=1,l=w[0];l>=10;l/=10,s++);if((a=e-s)<0)a+=h,c=e,d=w[g=0],p=o(d/y[s-c-1]%10);else if((g=i((a+1)/h))>=w.length){if(!r)break t;for(;w.length<=g;w.push(0));d=p=0,s=1,c=(a%=h)-h+1}else{for(d=l=w[g],s=1;l>=10;l/=10,s++);p=(c=(a%=h)-h+s)<0?0:o(d/y[s-c-1]%10)}if(r=r||e<0||null!=w[g+1]||(c<0?d:d%y[s-c-1]),r=n<4?(p||r)&&(0==n||n==(t.s<0?3:2)):p>5||5==p&&(4==n||r||6==n&&(a>0?c>0?d/y[s-c]:0:w[g-1])%10&1||n==(t.s<0?8:7)),e<1||!w[0])return w.length=0,r?(e-=t.e+1,w[0]=y[(h-e%h)%h],t.e=-e||0):w[0]=t.e=0,t;if(0==a?(w.length=g,l=1,g--):(w.length=g+1,l=y[h-a],w[g]=c>0?o(d/y[s-c]%y[c])*l:0),r)for(;;){if(0==g){for(a=1,c=w[0];c>=10;c/=10,a++);for(c=w[0]+=l,l=1;c>=10;c/=10,l++);a!=l&&(t.e++,w[0]==u&&(w[0]=1));break}if(w[g]+=l,w[g]!=u)break;w[g--]=0,l=1}for(a=w.length;0===w[--a];w.pop());}t.e>q?t.c=t.e=null:t.e<P&&(t.c=[t.e=0])}return t}function J(t){var e,n=t.e;return null===n?t.toString():(e=y(t.c),e=n<=I||n>=U?k(e,n):T(e,n,"0"),t.s<0?"-"+e:e)}return F.clone=t,F.ROUND_UP=0,F.ROUND_DOWN=1,F.ROUND_CEIL=2,F.ROUND_FLOOR=3,F.ROUND_HALF_UP=4,F.ROUND_HALF_DOWN=5,F.ROUND_HALF_EVEN=6,F.ROUND_HALF_CEIL=7,F.ROUND_HALF_FLOOR=8,F.EUCLID=9,F.config=F.set=function(t){var e,n;if(null!=t){if("object"!=typeof t)throw Error(c+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(v(n=t[e],0,p,e),C=n),t.hasOwnProperty(e="ROUNDING_MODE")&&(v(n=t[e],0,8,e),$=n),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((n=t[e])&&n.pop?(v(n[0],-p,0,e),v(n[1],0,p,e),I=n[0],U=n[1]):(v(n,-p,p,e),I=-(U=n<0?-n:n))),t.hasOwnProperty(e="RANGE"))if((n=t[e])&&n.pop)v(n[0],-p,-1,e),v(n[1],1,p,e),P=n[0],q=n[1];else{if(v(n,-p,p,e),!n)throw Error(c+e+" cannot be zero: "+n);P=-(q=n<0?-n:n)}if(t.hasOwnProperty(e="CRYPTO")){if((n=t[e])!==!!n)throw Error(c+e+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw D=!n,Error(c+"crypto unavailable");D=n}else D=n}if(t.hasOwnProperty(e="MODULO_MODE")&&(v(n=t[e],0,9,e),L=n),t.hasOwnProperty(e="POW_PRECISION")&&(v(n=t[e],0,p,e),M=n),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(n=t[e]))throw Error(c+e+" not an object: "+n);j=n}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(n=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(c+e+" invalid: "+n);K="0123456789"==n.slice(0,10),H=n}}return{DECIMAL_PLACES:C,ROUNDING_MODE:$,EXPONENTIAL_AT:[I,U],RANGE:[P,q],CRYPTO:D,MODULO_MODE:L,POW_PRECISION:M,FORMAT:j,ALPHABET:H}},F.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!F.DEBUG)return!0;var e,n,r=t.c,s=t.e,a=t.s;t:if("[object Array]"=={}.toString.call(r)){if((1===a||-1===a)&&s>=-p&&s<=p&&s===o(s)){if(0===r[0]){if(0===s&&1===r.length)return!0;break t}if((e=(s+1)%h)<1&&(e+=h),String(r[0]).length==e){for(e=0;e<r.length;e++)if((n=r[e])<0||n>=u||n!==o(n))break t;if(0!==n)return!0}}}else if(null===r&&null===s&&(null===a||1===a||-1===a))return!0;throw Error(c+"Invalid BigNumber: "+t)},F.maximum=F.max=function(){return G(arguments,-1)},F.minimum=F.min=function(){return G(arguments,1)},F.random=(_=9007199254740992,A=Math.random()*_&2097151?function(){return o(Math.random()*_)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,n,r,s,a,l=0,u=[],d=new F(R);if(null==t?t=C:v(t,0,p),s=i(t/h),D)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(s*=2));l<s;)(a=131072*e[l]+(e[l+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),e[l]=n[0],e[l+1]=n[1]):(u.push(a%1e14),l+=2);l=s/2}else{if(!crypto.randomBytes)throw D=!1,Error(c+"crypto unavailable");for(e=crypto.randomBytes(s*=7);l<s;)(a=281474976710656*(31&e[l])+1099511627776*e[l+1]+4294967296*e[l+2]+16777216*e[l+3]+(e[l+4]<<16)+(e[l+5]<<8)+e[l+6])>=9e15?crypto.randomBytes(7).copy(e,l):(u.push(a%1e14),l+=7);l=s/7}if(!D)for(;l<s;)(a=A())<9e15&&(u[l++]=a%1e14);for(s=u[--l],t%=h,s&&t&&(a=f[h-t],u[l]=o(s/a)*a);0===u[l];u.pop(),l--);if(l<0)u=[r=0];else{for(r=-1;0===u[0];u.splice(0,1),r-=h);for(l=1,a=u[0];a>=10;a/=10,l++);l<h&&(r-=h-l)}return d.e=r,d.c=u,d}),F.sum=function(){for(var t=1,e=arguments,n=new F(e[0]);t<e.length;)n=n.plus(e[t++]);return n},r=function(){var t="0123456789";function e(t,e,n,r){for(var s,a,i=[0],o=0,c=t.length;o<c;){for(a=i.length;a--;i[a]*=e);for(i[0]+=r.indexOf(t.charAt(o++)),s=0;s<i.length;s++)i[s]>n-1&&(null==i[s+1]&&(i[s+1]=0),i[s+1]+=i[s]/n|0,i[s]%=n)}return i.reverse()}return function(r,s,a,i,o){var c,l,u,h,d,f,g,p,w=r.indexOf("."),m=C,v=$;for(w>=0&&(h=M,M=0,r=r.replace(".",""),f=(p=new F(s)).pow(r.length-w),M=h,p.c=e(T(y(f.c),f.e,"0"),10,a,t),p.e=p.c.length),u=h=(g=e(r,s,a,o?(c=H,t):(c=t,H))).length;0==g[--h];g.pop());if(!g[0])return c.charAt(0);if(w<0?--u:(f.c=g,f.e=u,f.s=i,g=(f=n(f,p,m,v,a)).c,d=f.r,u=f.e),w=g[l=u+m+1],h=a/2,d=d||l<0||null!=g[l+1],d=v<4?(null!=w||d)&&(0==v||v==(f.s<0?3:2)):w>h||w==h&&(4==v||d||6==v&&1&g[l-1]||v==(f.s<0?8:7)),l<1||!g[0])r=d?T(c.charAt(1),-m,c.charAt(0)):c.charAt(0);else{if(g.length=l,d)for(--a;++g[--l]>a;)g[l]=0,l||(++u,g=[1].concat(g));for(h=g.length;!g[--h];);for(w=0,r="";w<=h;r+=c.charAt(g[w++]));r=T(r,u,c.charAt(0))}return r}}(),n=function(){function t(t,e,n){var r,s,a,i,o=0,c=t.length,l=e%g,u=e/g|0;for(t=t.slice();c--;)o=((s=l*(a=t[c]%g)+(r=u*a+(i=t[c]/g|0)*l)%g*g+o)/n|0)+(r/g|0)+u*i,t[c]=s%n;return o&&(t=[o].concat(t)),t}function e(t,e,n,r){var s,a;if(n!=r)a=n>r?1:-1;else for(s=a=0;s<n;s++)if(t[s]!=e[s]){a=t[s]>e[s]?1:-1;break}return a}function n(t,e,n,r){for(var s=0;n--;)t[n]-=s,s=t[n]<e[n]?1:0,t[n]=s*r+t[n]-e[n];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(r,s,a,i,c){var l,d,f,g,p,y,m,v,b,k,T,_,A,E,x,S,N,O=r.s==s.s?1:-1,B=r.c,R=s.c;if(!(B&&B[0]&&R&&R[0]))return new F(r.s&&s.s&&(B?!R||B[0]!=R[0]:R)?B&&0==B[0]||!R?0*O:O/0:NaN);for(b=(v=new F(O)).c=[],O=a+(d=r.e-s.e)+1,c||(c=u,d=w(r.e/h)-w(s.e/h),O=O/h|0),f=0;R[f]==(B[f]||0);f++);if(R[f]>(B[f]||0)&&d--,O<0)b.push(1),g=!0;else{for(E=B.length,S=R.length,f=0,O+=2,(p=o(c/(R[0]+1)))>1&&(R=t(R,p,c),B=t(B,p,c),S=R.length,E=B.length),A=S,T=(k=B.slice(0,S)).length;T<S;k[T++]=0);N=R.slice(),N=[0].concat(N),x=R[0],R[1]>=c/2&&x++;do{if(p=0,(l=e(R,k,S,T))<0){if(_=k[0],S!=T&&(_=_*c+(k[1]||0)),(p=o(_/x))>1)for(p>=c&&(p=c-1),m=(y=t(R,p,c)).length,T=k.length;1==e(y,k,m,T);)p--,n(y,S<m?N:R,m,c),m=y.length,l=1;else 0==p&&(l=p=1),m=(y=R.slice()).length;if(m<T&&(y=[0].concat(y)),n(k,y,T,c),T=k.length,-1==l)for(;e(R,k,S,T)<1;)p++,n(k,S<T?N:R,T,c),T=k.length}else 0===l&&(p++,k=[0]);b[f++]=p,k[0]?k[T++]=B[A]||0:(k=[B[A]],T=1)}while((A++<E||null!=k[0])&&O--);g=null!=k[0],b[0]||b.splice(0,1)}if(c==u){for(f=1,O=b[0];O>=10;O/=10,f++);V(v,a+(v.e=f+d*h-1)+1,i,g)}else v.e=d,v.r=+g;return v}}(),E=/^(-?)0([xbo])(?=\w[\w.]*$)/i,x=/^([^.]+)\.$/,S=/^\.([^.]+)$/,N=/^-?(Infinity|NaN)$/,O=/^\s*\+(?=[\w.])|^\s+|\s+$/g,s=function(t,e,n,r){var s,a=n?e:e.replace(O,"");if(N.test(a))t.s=isNaN(a)?null:a<0?-1:1;else{if(!n&&(a=a.replace(E,(function(t,e,n){return s="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=s?t:e})),r&&(s=r,a=a.replace(x,"$1").replace(S,"0.$1")),e!=a))return new F(a,s);if(F.DEBUG)throw Error(c+"Not a"+(r?" base "+r:"")+" number: "+e);t.s=null}t.c=t.e=null},B.absoluteValue=B.abs=function(){var t=new F(this);return t.s<0&&(t.s=1),t},B.comparedTo=function(t,e){return m(this,new F(t,e))},B.decimalPlaces=B.dp=function(t,e){var n,r,s,a=this;if(null!=t)return v(t,0,p),null==e?e=$:v(e,0,8),V(new F(a),t+a.e+1,e);if(!(n=a.c))return null;if(r=((s=n.length-1)-w(this.e/h))*h,s=n[s])for(;s%10==0;s/=10,r--);return r<0&&(r=0),r},B.dividedBy=B.div=function(t,e){return n(this,new F(t,e),C,$)},B.dividedToIntegerBy=B.idiv=function(t,e){return n(this,new F(t,e),0,1)},B.exponentiatedBy=B.pow=function(t,e){var n,r,s,a,l,u,d,f,g=this;if((t=new F(t)).c&&!t.isInteger())throw Error(c+"Exponent not an integer: "+J(t));if(null!=e&&(e=new F(e)),l=t.e>14,!g.c||!g.c[0]||1==g.c[0]&&!g.e&&1==g.c.length||!t.c||!t.c[0])return f=new F(Math.pow(+J(g),l?t.s*(2-b(t)):+J(t))),e?f.mod(e):f;if(u=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new F(NaN);(r=!u&&g.isInteger()&&e.isInteger())&&(g=g.mod(e))}else{if(t.e>9&&(g.e>0||g.e<-1||(0==g.e?g.c[0]>1||l&&g.c[1]>=24e7:g.c[0]<8e13||l&&g.c[0]<=9999975e7)))return a=g.s<0&&b(t)?-0:0,g.e>-1&&(a=1/a),new F(u?1/a:a);M&&(a=i(M/h+2))}for(l?(n=new F(.5),u&&(t.s=1),d=b(t)):d=(s=Math.abs(+J(t)))%2,f=new F(R);;){if(d){if(!(f=f.times(g)).c)break;a?f.c.length>a&&(f.c.length=a):r&&(f=f.mod(e))}if(s){if(0===(s=o(s/2)))break;d=s%2}else if(V(t=t.times(n),t.e+1,1),t.e>14)d=b(t);else{if(0==(s=+J(t)))break;d=s%2}g=g.times(g),a?g.c&&g.c.length>a&&(g.c.length=a):r&&(g=g.mod(e))}return r?f:(u&&(f=R.div(f)),e?f.mod(e):a?V(f,M,$,void 0):f)},B.integerValue=function(t){var e=new F(this);return null==t?t=$:v(t,0,8),V(e,e.e+1,t)},B.isEqualTo=B.eq=function(t,e){return 0===m(this,new F(t,e))},B.isFinite=function(){return!!this.c},B.isGreaterThan=B.gt=function(t,e){return m(this,new F(t,e))>0},B.isGreaterThanOrEqualTo=B.gte=function(t,e){return 1===(e=m(this,new F(t,e)))||0===e},B.isInteger=function(){return!!this.c&&w(this.e/h)>this.c.length-2},B.isLessThan=B.lt=function(t,e){return m(this,new F(t,e))<0},B.isLessThanOrEqualTo=B.lte=function(t,e){return-1===(e=m(this,new F(t,e)))||0===e},B.isNaN=function(){return!this.s},B.isNegative=function(){return this.s<0},B.isPositive=function(){return this.s>0},B.isZero=function(){return!!this.c&&0==this.c[0]},B.minus=function(t,e){var n,r,s,a,i=this,o=i.s;if(e=(t=new F(t,e)).s,!o||!e)return new F(NaN);if(o!=e)return t.s=-e,i.plus(t);var c=i.e/h,l=t.e/h,d=i.c,f=t.c;if(!c||!l){if(!d||!f)return d?(t.s=-e,t):new F(f?i:NaN);if(!d[0]||!f[0])return f[0]?(t.s=-e,t):new F(d[0]?i:3==$?-0:0)}if(c=w(c),l=w(l),d=d.slice(),o=c-l){for((a=o<0)?(o=-o,s=d):(l=c,s=f),s.reverse(),e=o;e--;s.push(0));s.reverse()}else for(r=(a=(o=d.length)<(e=f.length))?o:e,o=e=0;e<r;e++)if(d[e]!=f[e]){a=d[e]<f[e];break}if(a&&(s=d,d=f,f=s,t.s=-t.s),(e=(r=f.length)-(n=d.length))>0)for(;e--;d[n++]=0);for(e=u-1;r>o;){if(d[--r]<f[r]){for(n=r;n&&!d[--n];d[n]=e);--d[n],d[r]+=u}d[r]-=f[r]}for(;0==d[0];d.splice(0,1),--l);return d[0]?W(t,d,l):(t.s=3==$?-1:1,t.c=[t.e=0],t)},B.modulo=B.mod=function(t,e){var r,s,a=this;return t=new F(t,e),!a.c||!t.s||t.c&&!t.c[0]?new F(NaN):!t.c||a.c&&!a.c[0]?new F(a):(9==L?(s=t.s,t.s=1,r=n(a,t,0,3),t.s=s,r.s*=s):r=n(a,t,0,L),(t=a.minus(r.times(t))).c[0]||1!=L||(t.s=a.s),t)},B.multipliedBy=B.times=function(t,e){var n,r,s,a,i,o,c,l,d,f,p,y,m,v,b,k=this,T=k.c,_=(t=new F(t,e)).c;if(!(T&&_&&T[0]&&_[0]))return!k.s||!t.s||T&&!T[0]&&!_||_&&!_[0]&&!T?t.c=t.e=t.s=null:(t.s*=k.s,T&&_?(t.c=[0],t.e=0):t.c=t.e=null),t;for(r=w(k.e/h)+w(t.e/h),t.s*=k.s,(c=T.length)<(f=_.length)&&(m=T,T=_,_=m,s=c,c=f,f=s),s=c+f,m=[];s--;m.push(0));for(v=u,b=g,s=f;--s>=0;){for(n=0,p=_[s]%b,y=_[s]/b|0,a=s+(i=c);a>s;)n=((l=p*(l=T[--i]%b)+(o=y*l+(d=T[i]/b|0)*p)%b*b+m[a]+n)/v|0)+(o/b|0)+y*d,m[a--]=l%v;m[a]=n}return n?++r:m.splice(0,1),W(t,m,r)},B.negated=function(){var t=new F(this);return t.s=-t.s||null,t},B.plus=function(t,e){var n,r=this,s=r.s;if(e=(t=new F(t,e)).s,!s||!e)return new F(NaN);if(s!=e)return t.s=-e,r.minus(t);var a=r.e/h,i=t.e/h,o=r.c,c=t.c;if(!a||!i){if(!o||!c)return new F(s/0);if(!o[0]||!c[0])return c[0]?t:new F(o[0]?r:0*s)}if(a=w(a),i=w(i),o=o.slice(),s=a-i){for(s>0?(i=a,n=c):(s=-s,n=o),n.reverse();s--;n.push(0));n.reverse()}for((s=o.length)-(e=c.length)<0&&(n=c,c=o,o=n,e=s),s=0;e;)s=(o[--e]=o[e]+c[e]+s)/u|0,o[e]=u===o[e]?0:o[e]%u;return s&&(o=[s].concat(o),++i),W(t,o,i)},B.precision=B.sd=function(t,e){var n,r,s,a=this;if(null!=t&&t!==!!t)return v(t,1,p),null==e?e=$:v(e,0,8),V(new F(a),t,e);if(!(n=a.c))return null;if(r=(s=n.length-1)*h+1,s=n[s]){for(;s%10==0;s/=10,r--);for(s=n[0];s>=10;s/=10,r++);}return t&&a.e+1>r&&(r=a.e+1),r},B.shiftedBy=function(t){return v(t,-9007199254740991,d),this.times("1e"+t)},B.squareRoot=B.sqrt=function(){var t,e,r,s,a,i=this,o=i.c,c=i.s,l=i.e,u=C+4,h=new F("0.5");if(1!==c||!o||!o[0])return new F(!c||c<0&&(!o||o[0])?NaN:o?i:1/0);if(0==(c=Math.sqrt(+J(i)))||c==1/0?(((e=y(o)).length+l)%2==0&&(e+="0"),c=Math.sqrt(+e),l=w((l+1)/2)-(l<0||l%2),r=new F(e=c==1/0?"5e"+l:(e=c.toExponential()).slice(0,e.indexOf("e")+1)+l)):r=new F(c+""),r.c[0])for((c=(l=r.e)+u)<3&&(c=0);;)if(a=r,r=h.times(a.plus(n(i,a,u,1))),y(a.c).slice(0,c)===(e=y(r.c)).slice(0,c)){if(r.e<l&&--c,"9999"!=(e=e.slice(c-3,c+1))&&(s||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(V(r,r.e+C+2,1),t=!r.times(r).eq(i));break}if(!s&&(V(a,a.e+C+2,0),a.times(a).eq(i))){r=a;break}u+=4,c+=4,s=1}return V(r,r.e+C+1,$,t)},B.toExponential=function(t,e){return null!=t&&(v(t,0,p),t++),z(this,t,e,1)},B.toFixed=function(t,e){return null!=t&&(v(t,0,p),t=t+this.e+1),z(this,t,e)},B.toFormat=function(t,e,n){var r,s=this;if(null==n)null!=t&&e&&"object"==typeof e?(n=e,e=null):t&&"object"==typeof t?(n=t,t=e=null):n=j;else if("object"!=typeof n)throw Error(c+"Argument not an object: "+n);if(r=s.toFixed(t,e),s.c){var a,i=r.split("."),o=+n.groupSize,l=+n.secondaryGroupSize,u=n.groupSeparator||"",h=i[0],d=i[1],f=s.s<0,g=f?h.slice(1):h,p=g.length;if(l&&(a=o,o=l,l=a,p-=a),o>0&&p>0){for(a=p%o||o,h=g.substr(0,a);a<p;a+=o)h+=u+g.substr(a,o);l>0&&(h+=u+g.slice(a)),f&&(h="-"+h)}r=d?h+(n.decimalSeparator||"")+((l=+n.fractionGroupSize)?d.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):d):h}return(n.prefix||"")+r+(n.suffix||"")},B.toFraction=function(t){var e,r,s,a,i,o,l,u,d,g,p,w,m=this,v=m.c;if(null!=t&&(!(l=new F(t)).isInteger()&&(l.c||1!==l.s)||l.lt(R)))throw Error(c+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+J(l));if(!v)return new F(m);for(e=new F(R),d=r=new F(R),s=u=new F(R),w=y(v),i=e.e=w.length-m.e-1,e.c[0]=f[(o=i%h)<0?h+o:o],t=!t||l.comparedTo(e)>0?i>0?e:d:l,o=q,q=1/0,l=new F(w),u.c[0]=0;g=n(l,e,0,1),1!=(a=r.plus(g.times(s))).comparedTo(t);)r=s,s=a,d=u.plus(g.times(a=d)),u=a,e=l.minus(g.times(a=e)),l=a;return a=n(t.minus(r),s,0,1),u=u.plus(a.times(d)),r=r.plus(a.times(s)),u.s=d.s=m.s,p=n(d,s,i*=2,$).minus(m).abs().comparedTo(n(u,r,i,$).minus(m).abs())<1?[d,s]:[u,r],q=o,p},B.toNumber=function(){return+J(this)},B.toPrecision=function(t,e){return null!=t&&v(t,1,p),z(this,t,e,2)},B.toString=function(t){var e,n=this,s=n.s,a=n.e;return null===a?s?(e="Infinity",s<0&&(e="-"+e)):e="NaN":(null==t?e=a<=I||a>=U?k(y(n.c),a):T(y(n.c),a,"0"):10===t&&K?e=T(y((n=V(new F(n),C+a+1,$)).c),n.e,"0"):(v(t,2,H.length,"Base"),e=r(T(y(n.c),a,"0"),10,t,s,!0)),s<0&&n.c[0]&&(e="-"+e)),e},B.valueOf=B.toJSON=function(){return J(this)},B._isBigNumber=!0,null!=e&&F.set(e),F}(),s.default=s.BigNumber=s,void 0===(r=function(){return s}.call(e,n,e,t))||(t.exports=r)}()},647:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arrayCompare=e.MIN_CHUNK_SIZE=e.MAX_CHUNK_SIZE=void 0,e.chunkData=o,e.generateLeaves=c,e.computeRootHash=async function(t){return(await l(t)).id},e.generateTree=l,e.generateTransactionChunks=async function(t){const e=await o(t),n=await c(e),r=await u(n),s=await h(r),a=e.slice(-1)[0];return a.maxByteRange-a.minByteRange==0&&(e.splice(e.length-1,1),s.splice(s.length-1,1)),{data_root:r.id,chunks:e,proofs:s}},e.buildLayers=u,e.generateProofs=h,e.arrayFlatten=f,e.intToBuffer=w,e.bufferToInt=y,e.validatePath=async function t(n,r,s,o,c){if(o<=0)return!1;if(r>=o)return t(n,0,o-1,o,c);if(r<0)return t(n,0,0,o,c);if(c.length==i+a){const t=c.slice(0,i),r=c.slice(t.length,t.length+a),l=await p([await p(t),await p(r)]);return!!(0,e.arrayCompare)(n,l)&&{offset:o-1,leftBound:s,rightBound:o,chunkSize:o-s}}const l=c.slice(0,i),u=c.slice(l.length,l.length+i),h=c.slice(l.length+u.length,l.length+u.length+a),d=y(h),f=c.slice(l.length+u.length+h.length),g=await p([await p(l),await p(u),await p(h)]);return!!(0,e.arrayCompare)(n,g)&&(r<d?await t(l,r,s,Math.min(o,d),f):await t(u,r,Math.max(s,d),o,f))},e.debug=async function t(e,n=""){if(e.byteLength<1)return n;const r=e.slice(0,i),s=e.slice(r.length,r.length+i),o=e.slice(r.length+s.length,r.length+s.length+a),c=y(o),l=e.slice(r.length+s.length+o.length),u=await p([await p(r),await p(s),await p(o)]);return t(l,`${n}\n${JSON.stringify(Buffer.from(r))},${JSON.stringify(Buffer.from(s))},${c} => ${JSON.stringify(u)}`)};const r=n(908),s=n(848);e.MAX_CHUNK_SIZE=262144,e.MIN_CHUNK_SIZE=32768;const a=32,i=32;async function o(t){let n=[],s=t,a=0;for(;s.byteLength>=e.MAX_CHUNK_SIZE;){let t=e.MAX_CHUNK_SIZE,i=s.byteLength-e.MAX_CHUNK_SIZE;i>0&&i<e.MIN_CHUNK_SIZE&&(t=Math.ceil(s.byteLength/2));const o=s.slice(0,t),c=await r.default.crypto.hash(o);a+=o.byteLength,n.push({dataHash:c,minByteRange:a-o.byteLength,maxByteRange:a}),s=s.slice(t)}return n.push({dataHash:await r.default.crypto.hash(s),minByteRange:a,maxByteRange:a+s.byteLength}),n}async function c(t){return Promise.all(t.map((async({dataHash:t,minByteRange:e,maxByteRange:n})=>({type:"leaf",id:await p(await Promise.all([p(t),p(w(n))])),dataHash:t,minByteRange:e,maxByteRange:n}))))}async function l(t){return await u(await c(await o(t)))}async function u(t,e=0){if(t.length<2)return t[0];const n=[];for(let e=0;e<t.length;e+=2)n.push(await g(t[e],t[e+1]));return u(n,e+1)}function h(t){const e=d(t);return Array.isArray(e)?f(e):[e]}function d(t,e=new Uint8Array,n=0){if("leaf"==t.type)return{offset:t.maxByteRange-1,proof:(0,s.concatBuffers)([e,t.dataHash,w(t.maxByteRange)])};if("branch"==t.type){const r=(0,s.concatBuffers)([e,t.leftChild.id,t.rightChild.id,w(t.byteRange)]);return[d(t.leftChild,r,n+1),d(t.rightChild,r,n+1)]}throw new Error("Unexpected node type")}function f(t){const e=[];return t.forEach((t=>{Array.isArray(t)?e.push(...f(t)):e.push(t)})),e}async function g(t,e){return e?{type:"branch",id:await p([await p(t.id),await p(e.id),await p(w(t.maxByteRange))]),byteRange:t.maxByteRange,maxByteRange:e.maxByteRange,leftChild:t,rightChild:e}:t}async function p(t){return Array.isArray(t)&&(t=r.default.utils.concatBuffers(t)),new Uint8Array(await r.default.crypto.hash(t))}function w(t){const e=new Uint8Array(a);for(var n=e.length-1;n>=0;n--){var r=t%256;e[n]=r,t=(t-r)/256}return e}function y(t){let e=0;for(var n=0;n<t.length;n++)e*=256,e+=t[n];return e}e.arrayCompare=(t,e)=>t.every(((t,n)=>e[n]===t))},716:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SiloResource=void 0;const r=n(848);e.default=class{api;crypto;transactions;constructor(t,e,n){this.api=t,this.crypto=e,this.transactions=n}async get(t){if(!t)throw new Error("No Silo URI specified");const e=await this.parseUri(t),n=await this.transactions.search("Silo-Name",e.getAccessKey());if(0==n.length)throw new Error(`No data could be found for the Silo URI: ${t}`);const r=await this.transactions.get(n[0]);if(!r)throw new Error(`No data could be found for the Silo URI: ${t}`);const s=r.get("data",{decode:!0,string:!1});return this.crypto.decrypt(s,e.getEncryptionKey())}async readTransactionData(t,e){if(!e)throw new Error("No Silo URI specified");const n=await this.parseUri(e),r=t.get("data",{decode:!0,string:!1});return this.crypto.decrypt(r,n.getEncryptionKey())}async parseUri(t){const e=t.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!e)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");const n=e[1],a=Math.pow(2,parseInt(e[2])),i=await this.hash(r.stringToBuffer(n),a),o=r.bufferTob64(i.slice(0,15)),c=await this.hash(i.slice(16,31),1);return new s(t,o,c)}async hash(t,e){let n=await this.crypto.hash(t);for(let t=0;t<e-1;t++)n=await this.crypto.hash(n);return n}};class s{uri;accessKey;encryptionKey;constructor(t,e,n){this.uri=t,this.accessKey=e,this.encryptionKey=n}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}}e.SiloResource=s},727:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(764);e.default=class{constructor(t,e){this._id=t.id,this._anchor=t.anchor,this._signature=t.signature,this._recipient=t.recipient,this._owner=t.owner,this._fee=t.fee,this._quantity=t.quantity,this._data=t.data,this._tags=t.tags,this._block=t.block,t.parent&&t.parent.id&&(this._parent=t.parent),this.arweave=e}get id(){return this._id||r.log.show("ID wasn't defined, make sure you have selected to return it."),this._id}get anchor(){return this._anchor||r.log.show("Anchor wasn't defined, make sure you have selected to return it."),this._anchor}get signature(){return this._signature||r.log.show("Signature wasn't defined, make sure you have selected to return it."),this._signature}get recipient(){return this._recipient||r.log.show("Recipient wasn't defined, make sure you have selected to return it."),this._recipient}get owner(){return this._owner||r.log.show("Owner wasn't defined, make sure you have selected to return it."),this._owner}get fee(){return this._fee||r.log.show("Fee wasn't defined, make sure you have selected to return it."),this._fee}get quantity(){return this._quantity||r.log.show("Quantity wasn't defined, make sure you have selected to return it."),this._quantity}get data(){return this._data||r.log.show("Data wasn't defined, make sure you have selected to return it."),this._data}get tags(){return this._tags||r.log.show("Tags wasn't defined, make sure you have selected to return it."),this._tags}get block(){return this._block||r.log.show("Block wasn't defined, make sure you have selected to return it."),this._block}get parent(){return this._parent&&this._parent.id||r.log.show("Parent wasn't defined, make sure you have selected to return it."),this._parent}}},764:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.log=e.Log=e.LOGS=void 0,function(t){t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.ARWEAVE=2]="ARWEAVE"}(n=e.LOGS||(e.LOGS={}));class r{constructor(){this.logs=n.ARWEAVE}init(t=n.ARWEAVE,e){return this.logs=t,this.arweave=e,this}show(t,e="log"){(this.logs===n.YES||this.logs===n.ARWEAVE&&this.arweave.getConfig().api.logging)&&console[e](t)}}e.Log=r,e.log=new r},779:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{api;constructor(t){this.api=t}getInfo(){return this.api.get("info").then((t=>t.data))}getPeers(){return this.api.get("peers").then((t=>t.data))}}},813:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=void 0;const r=n(848),s=n(475),a=n(647);class i{get(t,e){if(!Object.getOwnPropertyNames(this).includes(t))throw new Error(`Field "${t}" is not a property of the Arweave Transaction class.`);if(this[t]instanceof Uint8Array)return e&&e.decode&&e.string?r.bufferToString(this[t]):e&&e.decode&&!e.string?this[t]:r.bufferTob64Url(this[t]);if(this[t]instanceof Array){if(void 0!==e?.decode||void 0!==e?.string)throw"tags"===t&&console.warn("Did you mean to use 'transaction[\"tags\"]' ?"),new Error("Cannot decode or stringify an array.");return this[t]}return e&&1==e.decode?e&&e.string?r.b64UrlToString(this[t]):r.b64UrlToBuffer(this[t]):this[t]}}class o extends i{name;value;constructor(t,e,n=!1){super(),this.name=t,this.value=e}}e.Tag=o,e.default=class extends i{format=2;id="";last_tx="";owner="";tags=[];target="";quantity="0";data_size="0";data=new Uint8Array;data_root="";reward="0";signature="";chunks;constructor(t={}){super(),Object.assign(this,t),"string"==typeof this.data&&(this.data=r.b64UrlToBuffer(this.data)),t.tags&&(this.tags=t.tags.map((t=>new o(t.name,t.value))))}addTag(t,e){this.tags.push(new o(r.stringToB64Url(t),r.stringToB64Url(e)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:r.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(t){this.owner=t}setSignature({id:t,owner:e,reward:n,tags:r,signature:s}){this.id=t,this.owner=e,n&&(this.reward=n),r&&(this.tags=r),this.signature=s}async prepareChunks(t){!this.chunks&&t.byteLength>0&&(this.chunks=await(0,a.generateTransactionChunks)(t),this.data_root=r.bufferTob64Url(this.chunks.data_root)),this.chunks||0!==t.byteLength||(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(t,e){if(!this.chunks)throw new Error("Chunks have not been prepared");const n=this.chunks.proofs[t],s=this.chunks.chunks[t];return{data_root:this.data_root,data_size:this.data_size,data_path:r.bufferTob64Url(n.proof),offset:n.offset.toString(),chunk:r.bufferTob64Url(e.slice(s.minByteRange,s.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let t=this.tags.reduce(((t,e)=>r.concatBuffers([t,e.get("name",{decode:!0,string:!1}),e.get("value",{decode:!0,string:!1})])),new Uint8Array);return r.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),r.stringToBuffer(this.quantity),r.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),t]);case 2:this.data_root||await this.prepareChunks(this.data);const e=this.tags.map((t=>[t.get("name",{decode:!0,string:!1}),t.get("value",{decode:!0,string:!1})]));return await(0,s.default)([r.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),r.stringToBuffer(this.quantity),r.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),e,r.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}}},848:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.concatBuffers=function(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n].byteLength;let n=new Uint8Array(e),r=0;n.set(new Uint8Array(t[0]),r),r+=t[0].byteLength;for(let e=1;e<t.length;e++)n.set(new Uint8Array(t[e]),r),r+=t[e].byteLength;return n},e.b64UrlToString=function(t){return s(i(t))},e.bufferToString=s,e.stringToBuffer=a,e.stringToB64Url=function(t){return c(a(t))},e.b64UrlToBuffer=i,e.bufferTob64=o,e.bufferTob64Url=c,e.b64UrlEncode=l,e.b64UrlDecode=u;const r=n(526);function s(t){return new TextDecoder("utf-8",{fatal:!0}).decode(t)}function a(t){return(new TextEncoder).encode(t)}function i(t){return new Uint8Array(r.toByteArray(u(t)))}function o(t){return r.fromByteArray(new Uint8Array(t))}function c(t){return l(o(t))}function l(t){try{return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}catch(t){throw new Error("Failed to encode string",{cause:t})}}function u(t){try{let e;return e=(t=t.replace(/\-/g,"+").replace(/\_/g,"/")).length%4==0?0:4-t.length%4,t.concat("=".repeat(e))}catch(t){throw new Error("Failed to decode string",{cause:t})}}},855:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(911),s=n(848);e.default=class{api;constructor(t){this.api=t}async getTransactionOffset(t){const e=await this.api.get(`tx/${t}/offset`);if(200===e.status)return e.data;throw new Error(`Unable to get transaction offset: ${(0,r.getError)(e)}`)}async getChunk(t){const e=await this.api.get(`chunk/${t}`);if(200===e.status)return e.data;throw new Error(`Unable to get chunk: ${(0,r.getError)(e)}`)}async getChunkData(t){const e=await this.getChunk(t);return s.b64UrlToBuffer(e.chunk)}firstChunkOffset(t){return parseInt(t.offset)-parseInt(t.size)+1}async downloadChunkedData(t){const e=await this.getTransactionOffset(t),n=parseInt(e.size),r=parseInt(e.offset)-n+1,s=new Uint8Array(n);let a=0;for(;a<n;){let t;this.api.config.logging&&console.log(`[chunk] ${a}/${n}`);try{t=await this.getChunkData(r+a)}catch(t){console.error(`[chunk] Failed to fetch chunk at offset ${r+a}`),console.error("[chunk] This could indicate that the chunk wasn't uploaded or hasn't yet seeded properly to a particular gateway/node")}if(!t)throw new Error(`Couldn't complete data download at ${a}/${n}`);s.set(t,a),a+=t.length}return s}}},908:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=n(566),s=n(965),a=n(311),i=n(779),o=n(320),c=n(115),l=n(813),u=n(848),h=n(716),d=n(855),f=n(143);class g{api;wallets;transactions;network;blocks;ar;silo;chunks;static init;static crypto=new a.default;static utils=u;constructor(t){this.api=new s.default(t),this.wallets=new c.default(this.api,g.crypto),this.chunks=new d.default(this.api),this.transactions=new o.default(this.api,g.crypto,this.chunks),this.silo=new h.default(this.api,this.crypto,this.transactions),this.network=new i.default(this.api),this.blocks=new f.default(this.api,this.network),this.ar=new r.default}get crypto(){return g.crypto}get utils(){return g.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(t,e){const n={};if(Object.assign(n,t),!(t.data||t.target&&t.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(null==t.owner&&e&&"use_wallet"!==e&&(n.owner=e.n),null==t.last_tx&&(n.last_tx=await this.transactions.getTransactionAnchor()),"string"==typeof t.data&&(t.data=u.stringToBuffer(t.data)),t.data instanceof ArrayBuffer&&(t.data=new Uint8Array(t.data)),t.data&&!(t.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(null==t.reward){const e=t.data?t.data.byteLength:0;n.reward=await this.transactions.getPrice(e,n.target)}n.data_root="",n.data_size=t.data?t.data.byteLength.toString():"0",n.data=t.data||new Uint8Array(0);const r=new l.default(n);return await r.getSignatureData(),r}async createSiloTransaction(t,e,n){const r={};if(Object.assign(r,t),!t.data)throw new Error("Silo transactions must have a 'data' value");if(!n)throw new Error("No Silo URI specified.");if(t.target||t.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(null==t.owner){if(!e||!e.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");r.owner=e.n}null==t.last_tx&&(r.last_tx=await this.transactions.getTransactionAnchor());const s=await this.silo.parseUri(n);if("string"==typeof t.data){const e=await this.crypto.encrypt(u.stringToBuffer(t.data),s.getEncryptionKey());r.reward=await this.transactions.getPrice(e.byteLength),r.data=u.bufferTob64Url(e)}if(t.data instanceof Uint8Array){const e=await this.crypto.encrypt(t.data,s.getEncryptionKey());r.reward=await this.transactions.getPrice(e.byteLength),r.data=u.bufferTob64Url(e)}const a=new l.default(r);return a.addTag("Silo-Name",s.getAccessKey()),a.addTag("Silo-Version","0.1.0"),a}arql(t){return this.api.post("/arql",t).then((t=>t.data||[]))}}e.default=g},911:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getError=function(t){let e=t.data;if("string"==typeof t.data)try{e=JSON.parse(t.data)}catch(t){}if(t.data instanceof ArrayBuffer||t.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch(t){}return e?e.error||e:t.statusText||"unknown"};class n extends Error{type;response;constructor(t,e={}){e.message?super(e.message):super(),this.type=t,this.response=e.response}getType(){return this.type}}e.default=n},965:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{METHOD_GET="GET";METHOD_POST="POST";config;constructor(t){this.applyConfig(t)}applyConfig(t){this.config=this.mergeDefaults(t)}getConfig(){return this.config}mergeDefaults(t){const e=t.protocol||"http",n=t.port||("https"===e?443:80);return{host:t.host||"127.0.0.1",protocol:e,port:n,timeout:t.timeout||2e4,logging:t.logging||!1,logger:t.logger||console.log,network:t.network}}async get(t,e){return await this.request(t,{...e,method:this.METHOD_GET})}async post(t,e,n){const r=new Headers(n?.headers||{});return r.get("content-type")?.includes("application/json")||r.append("content-type","application/json"),r.append("accept","application/json, text/plain, */*"),await this.request(t,{...n,method:this.METHOD_POST,body:"string"!=typeof e?JSON.stringify(e):e,headers:r})}async request(t,e){const r=new Headers(e?.headers||{}),s=`${this.config.protocol}://${this.config.host}:${this.config.port}`,a=e?.responseType;delete e?.responseType,t.startsWith("/")&&(t=t.slice(1)),this.config.network&&r.append("x-network",this.config.network),this.config.logging&&this.config.logger(`Requesting: ${s}/${t}`);let i=await fetch(`${s}/${t}`,{...e||{},headers:r});this.config.logging&&this.config.logger(`Response:   ${i.url} - ${i.status}`);const o=i.headers.get("content-type"),c=o?.match(/charset=([^()<>@,;:\"/[\]?.=\s]*)/i)?.[1],l=i,u=async()=>{if(c)try{l.data=new TextDecoder(c).decode(await i.arrayBuffer())}catch(t){l.data=await i.text()}else l.data=await i.text()};if("arraybuffer"===a)l.data=await i.arrayBuffer();else if("text"===a)await u();else if("webstream"===a)l.data=n(i.body);else try{let t=await i.clone().json();"object"!=typeof t?await u():l.data=await i.json(),t=null}catch{await u()}return l}};const n=t=>{const e=t;return void 0===e[Symbol.asyncIterator]&&(e[Symbol.asyncIterator]=r(t)),e},r=function(t){return async function*(){const e=t.getReader();try{for(;;){const{done:t,value:n}=await e.read();if(t)return;yield n}}finally{e.releaseLock()}}}}},e={};function n(r){var s=e[r];if(void 0!==s)return s.exports;var a=e[r]={exports:{}};return t[r].call(a.exports,a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t=n(69),e=n.n(t),r=n(363),s=n.n(r);const a=e().init({host:"arweave.net",port:443,protocol:"https",timeout:3e4,logging:!0}),i=new(s())(a,{graphql:{host:"arweave.net",port:443,protocol:"https",timeout:3e4}});console.log("Arweave initialized with host:",a.api.config.host),console.log("Environment:",{production:"undefined"!=typeof window&&"localhost"!==window.location.hostname,hostname:"undefined"!=typeof window?window.location.hostname:"unknown"});const o=document.getElementById("nameFilter"),c=document.getElementById("locationFilter"),l=document.getElementById("associationsFilter"),u=document.getElementById("scoreFilter"),h=document.getElementById("applyFilters"),d=document.getElementById("results"),f=document.getElementById("resultsCount");async function g(t){try{console.log("Displaying rating:",t.id);const n={},r={};t.tags&&t.tags.forEach((t=>{r[t.name]=t.value,console.log(`Tag: ${t.name} = ${t.value}`)}));let s={};try{const e=await a.transactions.getData(t.id,{decode:!0,string:!0});e&&(console.log("Transaction data found:",e.substring(0,100)+"..."),s=JSON.parse(e))}catch(t){console.log("Could not get transaction data:",t.message)}n.firstName=r["First-Name"]||s.firstName||"",n.middleName=r["Middle-Name"]||s.middleName||"",n.lastName=r["Last-Name"]||s.lastName||"",n.location=r.Location||s.location||"",n.associations=r.Associations||s.associations||"",n.score=parseInt(r["Rating-Score"])||s.score||0,n.unixTime=parseInt(r["Unix-Time"])||s.timestamp||0,n.comments=s.comments||"";const i=n.unixTime?new Date(1e3*n.unixTime):null,o=i?i.toLocaleString():"Unknown",c=[n.firstName,n.middleName,n.lastName].filter(Boolean);return`\n            <div class="bg-white rounded-lg shadow-md p-6 mb-6">\n                <div class="flex items-center justify-between mb-4">\n                    <h3 class="text-xl font-bold">${(c.length>0?c.join(" "):"Anonymous")||"Unknown Person"}</h3>\n                    <div class="${e=n.score,(e=parseInt(e)||0)>=8?"bg-green-100 text-green-800":e>=6?"bg-blue-100 text-blue-800":e>=4?"bg-yellow-100 text-yellow-800":e>=2?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"} font-bold text-xl px-3 py-1 rounded-full">\n                        ${n.score||"?"}/10\n                    </div>\n                </div>\n                \n                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">\n                    <div class="bg-gray-50 p-3 rounded border border-gray-100">\n                        <h4 class="font-medium text-gray-700 mb-2">Personal Details</h4>\n                        <ul class="space-y-1 text-sm">\n                            <li><span class="font-semibold">First Name:</span> ${n.firstName||'<span class="text-gray-400 italic">Not provided</span>'}</li>\n                            <li><span class="font-semibold">Middle Name:</span> ${n.middleName||'<span class="text-gray-400 italic">Not provided</span>'}</li>\n                            <li><span class="font-semibold">Last Name:</span> ${n.lastName||'<span class="text-gray-400 italic">Not provided</span>'}</li>\n                        </ul>\n                    </div>\n                    \n                    <div class="bg-gray-50 p-3 rounded border border-gray-100">\n                        <h4 class="font-medium text-gray-700 mb-2">Additional Information</h4>\n                        <ul class="space-y-1 text-sm">\n                            <li><span class="font-semibold">Location:</span> ${n.location||'<span class="text-gray-400 italic">Not provided</span>'}</li>\n                            <li><span class="font-semibold">Associations:</span> ${n.associations||'<span class="text-gray-400 italic">Not provided</span>'}</li>\n                            <li><span class="font-semibold">Date Submitted:</span> ${o}</li>\n                        </ul>\n                    </div>\n                </div>\n                \n                <div class="border-t pt-4">\n                    <h4 class="font-bold mb-2">Comments:</h4>\n                    <p class="bg-gray-50 p-3 rounded border border-gray-100">${n.comments||'<span class="text-gray-400 italic">No comments provided</span>'}</p>\n                </div>\n                <div class="mt-4 border-t pt-3">\n                    <a href="https://arweave.net/${t.id}" target="_blank" class="inline-block bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm">\n                        <span class="flex items-center">\n                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />\n                            </svg>\n                            View Transaction on Arweave\n                        </span>\n                    </a>\n                    <div class="text-xs text-gray-500 mt-1">Transaction ID: ${t.id.substring(0,8)}...${t.id.substring(t.id.length-8)}</div>\n                </div>\n            </div>\n        `}catch(e){return console.error("Error displaying rating:",e),`\n            <div class="bg-white rounded-lg shadow-md p-6 mb-6 border-l-4 border-yellow-500">\n                <h3 class="text-lg font-semibold text-yellow-700">Transaction Found</h3>\n                <p class="mb-2">This appears to be a RateAnybody transaction, but we couldn't display all the data.</p>\n                <div class="mt-4 border-t pt-3">\n                    <a href="https://arweave.net/${t.id}" target="_blank" class="inline-block bg-blue-500 hover:bg-blue-600 text-white px-3 py-1 rounded text-sm">\n                        <span class="flex items-center">\n                            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">\n                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />\n                            </svg>\n                            View Transaction on Arweave\n                        </span>\n                    </a>\n                    <div class="text-xs text-gray-500 mt-1">Transaction ID: ${t.id.substring(0,8)}...${t.id.substring(t.id.length-8)}</div>\n                </div>\n            </div>\n        `}var e}async function p(){d.innerHTML='<div class="text-center">Loading...</div>';const t=await async function(){d.innerHTML='\n        <div class="p-4 text-center">\n            <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mb-2"></div>\n            <p>Querying the Arweave network for ratings...</p>\n        </div>\n    ';try{console.log("Starting query at:",(new Date).toISOString());let t=i.search("transactions").tag("App-Name","RateAnybody");if(console.log("Query created with App-Name tag"),o.value){console.log("Adding name filter:",o.value);const e=o.value.split(" ");t=t.tag("First-Name",e[0])}c.value&&(console.log("Adding location filter:",c.value),t=t.tag("Location",c.value)),l.value&&(console.log("Adding associations filter:",l.value),t=t.tag("Associations",l.value)),u.value&&(console.log("Adding score filter:",u.value),t=t.tag("Rating-Score",u.value)),console.log("Query configuration:",t),console.log("Executing query at:",(new Date).toISOString());const e=t.findAll(),n=new Promise(((t,e)=>{setTimeout((()=>e(new Error("Query timed out after 30 seconds"))),3e4)})),r=await Promise.race([e,n]);if(console.log("Query completed at:",(new Date).toISOString()),console.log("Query results count:",r.length),0===r.length){console.warn("â ï¸ No results found! This might indicate:"),console.warn('  - No ratings exist with the App-Name "RateAnybody"'),console.warn("  - CORS issues with the Arweave gateway"),console.warn("  - Network connectivity problems"),console.log("Attempting direct gateway query for diagnostics...");try{const t="https://arweave.net/gateway/tags/App-Name/RateAnybody";console.log("Checking direct gateway URL:",t);const e=await fetch(t,{method:"GET",headers:{Accept:"application/json"}});if(e.ok){const n=await e.json();console.log("Gateway query results:",n),n&&n.length>0&&(console.warn("â ï¸ Gateway found results but ArDB did not - likely a CORS or library issue"),d.innerHTML=`\n                            <div class="bg-yellow-50 border-l-4 border-yellow-500 p-4 mb-4 rounded">\n                                <div class="flex">\n                                    <div class="flex-shrink-0">\n                                        <svg class="h-5 w-5 text-yellow-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">\n                                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />\n                                        </svg>\n                                    </div>\n                                    <div class="ml-3">\n                                        <h3 class="text-sm font-medium text-yellow-800">CORS Issue Detected</h3>\n                                        <div class="mt-2 text-sm text-yellow-700">\n                                            <p>We detected that ratings exist but cannot be displayed due to browser security restrictions.</p>\n                                            <p class="mt-2">Try visiting the official gateway directly:</p>\n                                            <p class="mt-1"><a href="${t}" target="_blank" class="text-blue-600 hover:underline">${t}</a></p>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        `)}else console.error("Gateway query failed with status:",e.status)}catch(t){console.error("Direct gateway query failed:",t)}}else r.forEach(((t,e)=>{console.log(`Result ${e+1}:`,{id:t.id,owner:t.owner?.address?.substring(0,8)+"...",tags:t.tags.map((t=>`${t.name}: ${t.value}`))})}));return r}catch(t){return console.error("Error querying Arweave:",t),d.innerHTML=`\n            <div class="bg-red-50 border-l-4 border-red-500 p-4 rounded">\n                <div class="flex">\n                    <div class="flex-shrink-0">\n                        <svg class="h-5 w-5 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">\n                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd" />\n                        </svg>\n                    </div>\n                    <div class="ml-3">\n                        <h3 class="text-sm font-medium text-red-800">Error Querying Arweave</h3>\n                        <div class="mt-2 text-sm text-red-700">\n                            <p>${t.message}</p>\n                            <p class="mt-2">If you're viewing this on the Cloudflare deployment, try the following:</p>\n                            <ul class="list-disc pl-5 mt-1">\n                                <li>Check browser console for CORS errors</li>\n                                <li>Try disabling any content blockers</li>\n                                <li>Try a different browser</li>\n                            </ul>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        `,[]}}();if(f.textContent=`Found ${t.length} rating${1===t.length?"":"s"}`,d.innerHTML="",0!==t.length){t.sort(((t,e)=>{const n=t=>{if(t.tags){const e=t.tags.find((t=>"Unix-Time"===t.name));return parseInt(e?.value||"0")}return 0};return n(e)-n(t)}));for(const e of t){const t=await g(e);d.innerHTML+=t}}else d.innerHTML='<div class="text-gray-500 text-center">No ratings found matching your filters.</div>'}h.addEventListener("click",p),p()})()})();
//# sourceMappingURL=view.bundle.js.map